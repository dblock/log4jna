version: 2.0.{build}
os: Windows Server 2012
branches:
  only:
  - maven-conversion
install:
#  - ps: |
#      Add-Type -AssemblyName System.IO.Compression.FileSystem
#      if (!(Test-Path -Path "C:\Program Files (x86)\GNU\GnuPG" )) {
#        (new-object System.Net.WebClient).DownloadFile(
#          'https://files.gpg4win.org/gpg4win-vanilla-2.3.2.exe',
#          'C:\gpg4win-vanilla-2.3.2.exe'
#        )
#      }
#  - cmd: C:\gpg4win-vanilla-2.3.2.exe /S
  - cmd: gpg --version
  - cmd: DIR %APPVEYOR_BUILD_FOLDER%
  
# For build and test we need to pass -Djna.nosys=true  to avoid exception:
# java.lang.UnsatisfiedLinkError: Can't obtain updateLastError method for class com.sun.jna.Native
build_script:
   - gpg --list-keys
#  - mvn clean install -B -Djna.nosys=true

test_script:
#build_script:
#  - mvn clean install -B -Djna.nosys=true

#test_script:
#  - mvn clean -B test -Djna.nosys=true 
cache:
  - '%USERPROFILE%\.gnupg'
#  - C:\maven\apache-maven-3.3.9
#  - '%USERPROFILE%\.m2'
